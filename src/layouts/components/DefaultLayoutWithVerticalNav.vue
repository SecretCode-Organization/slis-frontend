<script setup>
import axios from '@axios'

const navItems = ref([])

axios.get('nav-items').then(({ data }) => {
  navItems.value = data
})

import { useThemeConfig } from '@core/composable/useThemeConfig'

// Components
import NavbarShortcuts from '@/layouts/components/NavbarShortcuts.vue'
import NavbarThemeSwitcher from '@/layouts/components/NavbarThemeSwitcher.vue'
import NavSearchBar from '@/layouts/components/NavSearchBar.vue'
import UserProfile from '@/layouts/components/UserProfile.vue'

// @layouts plugin
import { VerticalNavLayout } from '@layouts'

const { appRouteTransition, isLessThanOverlayNavBreakpoint } = useThemeConfig()
const { width: windowWidth } = useWindowSize()

const items = [
  {
    text: 'Home',
    disabled: false,
    href: '/',
  },
  {
    text: 'Link 1',
    disabled: true,
    href: 'breadcrumbs_link_1',
  },
  {
    text: 'Link 2',
    disabled: false,
    href: 'breadcrumbs_link_2',
  },
]
</script>

<template>
  <VerticalNavLayout :nav-items="navItems">
    <!-- ðŸ‘‰ navbar -->
    <template #navbar="{ toggleVerticalOverlayNavActive }">
      <div class="d-flex h-100 align-center">
        <VBtn
          v-if="isLessThanOverlayNavBreakpoint(windowWidth)"
          icon
          variant="text"
          color="default"
          class="ms-n3"
          size="small"
          @click="toggleVerticalOverlayNavActive(true)"
        >
          <VIcon icon="mdi-menu" size="24" />
        </VBtn>

        <NavSearchBar class="ms-lg-n3" />

        <VSpacer />

        <NavbarThemeSwitcher />
        <NavbarShortcuts />
        <UserProfile />
      </div>
    </template>

    <VCard elevation="2" class="mb-5">
      <!-- breadcrumbs add -->
      <VBreadcrumbs :items="items">
        <template #item="{ item }">
          <VBreadcrumbsItem :href="item.href" :disabled="item.disabled">
            {{ item.text.toUpperCase() }}
          </VBreadcrumbsItem>
        </template>
      </VBreadcrumbs>
    </VCard>

    <!-- ðŸ‘‰ Pages -->
    <RouterView v-slot="{ Component }">
      <Transition :name="appRouteTransition" mode="out-in">
        <Component :is="Component" />
      </Transition>
    </RouterView>

    <!-- ðŸ‘‰ Footer -->
    <!--    <template #footer> -->
    <!--      <Footer /> -->
    <!--    </template> -->

    <!-- ðŸ‘‰ Customizer -->
    <TheCustomizer />
  </VerticalNavLayout>
</template>
